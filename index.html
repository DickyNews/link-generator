<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dicky News Unlock</title>

<style>
body{
  font-family:Arial;
  background:#0f172a;
  color:#fff;
  text-align:center;
  padding:30px;
}
.box{
  max-width:600px;
  margin:auto;
  background:#1e293b;
  padding:25px;
  border-radius:12px;
}
input{
  width:100%;
  padding:12px;
  margin:6px 0;
  border-radius:6px;
  border:none;
}
button{
  width:100%;
  padding:14px;
  margin:8px 0;
  border:none;
  border-radius:8px;
  font-size:16px;
  cursor:pointer;
  font-weight: bold;
  transition: 0.3s;
}
/* Tombol tugas yang belum diklik */
.btn-task {
  background: #4a5568;
  color: white;
}
/* Tombol tugas yang sudah diklik */
.btn-done {
  background: #1e293b !important;
  color: #64748b !important;
  cursor: not-allowed;
  border: 1px solid #4a5568;
}
/* Tombol utama (Generator & Unlock Akhir) */
.btn-primary {
  background: #fff;
  color: #0f172a;
}
#result{
  margin-top:15px;
  word-break:break-all;
}
</style>
</head>

<body>

<div class="box" id="app"></div>

<script>
const params = new URLSearchParams(window.location.search);
const app = document.getElementById("app");

// ================= MODE 1: GENERATOR =================
// (Muncul jika link dibuka tanpa parameter tambahan)
if(params.toString() === "" || !params.get("custom")){

app.innerHTML = `
<h2>Unlock Link Generator</h2>
<input id="ytch" placeholder="Link Channel YouTube Utama">
<input id="ytch2" placeholder="Link Channel YouTube Kedua">
<input id="ytvid" placeholder="Link Video YouTube">
<input id="ig" placeholder="Link Instagram">
<input id="tt" placeholder="Link TikTok">
<input id="fb" placeholder="Link Facebook">
<input id="custom" placeholder="Link File / Tujuan Unlock">

<button class="btn-primary" onclick="generate()">Buat Link Unlock</button>
<div id="result"></div>
`;

window.generate = function(){
  let base = window.location.origin + window.location.pathname;
  let arr = [];
  ["ytch","ytch2","ytvid","ig","tt","fb","custom"].forEach(id=>{
    let v = document.getElementById(id).value.trim();
    if(v) arr.push(id+"="+encodeURIComponent(v));
  });
  
  if(!document.getElementById("custom").value.trim()){
      alert("Link Tujuan Unlock wajib diisi!");
      return;
  }

  let link = base + "?" + arr.join("&");
  document.getElementById("result").innerHTML =
    "<p>Salin & Bagikan Link Ini:</p><input readonly value='"+link+"' onclick='this.select()' style='cursor:pointer; text-align:center;'>";
};

}

// ================= MODE 2: UNLOCK =================
// (Muncul jika ada link target 'custom')
else {

app.innerHTML = "<h3>Selesaikan langkah di bawah untuk membuka link ðŸ‘‡</h3><div id='task-list'></div><div id='unlock-area'></div>";

let totalTasks = 0;
let completedTasks = 0;
const taskList = document.getElementById('task-list');

function addBtn(text, link){
  totalTasks++;
  let b = document.createElement("button");
  b.innerText = text;
  b.className = "btn-task";
  
  b.onclick = function(){
    window.open(link, "_blank");
    
    // Validasi: Beri jeda sebentar sebelum tombol dianggap selesai
    if(!b.classList.contains("btn-done")){
        b.classList.add("btn-done");
        b.innerText = "âœ… " + text;
        completedTasks++;
        
        // Jika semua tugas sudah diklik, munculkan tombol buka link
        if(completedTasks >= totalTasks) showOpenButton();
    }
  };
  taskList.appendChild(b);
}

function showOpenButton(){
  const area = document.getElementById('unlock-area');
  area.innerHTML = ""; // Bersihkan jika ada
  let o = document.createElement("button");
  o.innerText = "BUKA LINK TUJUAN";
  o.className = "btn-primary";
  o.style.marginTop = "20px";
  o.style.background = "#22c55e";
  o.style.color = "white";
  o.onclick = function(){
    window.location.href = params.get("custom");
  };
  area.appendChild(o);
}

// Cek parameter dan tambahkan tombol tugas secara otomatis
if(params.get("ytch")) addBtn("Subscribe YouTube Utama", params.get("ytch"));
if(params.get("ytch2")) addBtn("Subscribe YouTube Kedua", params.get("ytch2"));
if(params.get("ytvid")) addBtn("Like & Comment Video", params.get("ytvid"));
if(params.get("ig")) addBtn("Follow Instagram", params.get("ig"));
if(params.get("tt")) addBtn("Follow TikTok", params.get("tt"));
if(params.get("fb")) addBtn("Follow Facebook", params.get("fb"));

// Jika tidak ada tugas sama sekali tapi ada link tujuan (kasus jarang)
if(totalTasks === 0) showOpenButton();

}
</script>

</body>
</html>
